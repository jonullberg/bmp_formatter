'use strict';

var expect = require('chai').expect;
var create = require('../lib/create.js');
var fs = require('fs');

describe('Create.js', function() {
  var path = '../tmp/tester.bmp';
  describe('Bitmap Header Info', function() {
    it('Should create header', function() {
      var expectObject = {
        bfType: 19778,
        bfSize: 1266,
        bfReserved1: 0,
        bfReserved2: 0,
        bfOffBits: 1146
      };
      fs.readFile(path, function(err, data) {
        if (err) throw err;
        expect(create.createFileHeader(data)).to.eql(expectObject);
      });
    });
  });

  describe('DIB Header Info', function() {
    it('Should create DIB header', function() {
      var expectObject = {
        biteSize: 108,
        biteWidth: 10,
        biteHeight: 10,
        bitePlanes: 1,
        biteBitCount: 8,
        biteCompression: 0,
        biteSizeImage: 120,
        biteXPelsPerMeter: 2834,
        biteYPelsPerMeter: 2834,
        biteClrUsed: 256,
        biteClrImportant: 256
      };
      fs.readFile(path, function(err, data) {
        if (err) throw err;
        var bmp = create.createFileHeader(data);
        expect(create.createInfoHeader(bmp, data)).to.eql(expectObject);
      });
    });
  });

  describe('Palette Data', function() {
    it('Should create palette info', function() {
      var expectObject = [
        { b: 66, g: 71, r: 82, a: 115 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 2, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 52, g: 32, r: 34, a: 0 },
        { b: 60, g: 40, r: 69, a: 0 },
        { b: 49, g: 57, r: 102, a: 0 },
        { b: 59, g: 86, r: 143, a: 0 },
        { b: 38, g: 113, r: 223, a: 0 },
        { b: 102, g: 160, r: 217, a: 0 },
        { b: 154, g: 195, r: 238, a: 0 },
        { b: 54, g: 242, r: 251, a: 0 },
        { b: 80, g: 229, r: 153, a: 0 },
        { b: 48, g: 190, r: 106, a: 0 },
        { b: 110, g: 148, r: 55, a: 0 },
        { b: 47, g: 105, r: 75, a: 0 },
        { b: 36, g: 75, r: 82, a: 0 },
        { b: 57, g: 60, r: 50, a: 0 },
        { b: 116, g: 63, r: 63, a: 0 },
        { b: 130, g: 96, r: 48, a: 0 },
        { b: 225, g: 110, r: 91, a: 0 },
        { b: 255, g: 155, r: 99, a: 0 },
        { b: 228, g: 205, r: 95, a: 0 },
        { b: 252, g: 219, r: 203, a: 0 },
        { b: 255, g: 255, r: 255, a: 0 },
        { b: 183, g: 173, r: 155, a: 0 },
        { b: 135, g: 126, r: 132, a: 0 },
        { b: 106, g: 106, r: 105, a: 0 },
        { b: 82, g: 86, r: 89, a: 0 },
        { b: 138, g: 66, r: 118, a: 0 },
        { b: 50, g: 50, r: 172, a: 0 },
        { b: 99, g: 87, r: 217, a: 0 },
        { b: 186, g: 123, r: 215, a: 0 },
        { b: 74, g: 151, r: 143, a: 0 },
        { b: 48, g: 111, r: 138, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 },
        { b: 0, g: 0, r: 0, a: 0 }
     ];
      fs.readFile(path, function(err, data) {
        if (err) throw err;
        var bmp = create.createFileHeader(data);
        bmp = create.createInfoHeader(bmp, data);
        expect(create.createColorData(bmp, data)).to.eql(expectObject);
      });
    });
  });

  describe('Pixel Data', function() {
    it('Should create pixel info', function() {
      var expectObject = [
        { b: 66, g: 71, r: 82 },
        { b: 115, g: 0, r: 0 },
        { b: 0, g: 0, r: 0 },
        { b: 0, g: 0, r: 0 },
        { b: 0, g: 0, r: 0 },
        { b: 0, g: 0, r: 0 },
        { b: 0, g: 0, r: 0 },
        { b: 0, g: 0, r: 0 },
        { b: 0, g: 0, r: 0 },
        { b: 0, g: 0, r: 0 },
        { b: 0, g: 0, r: 0 },
        { b: 0, g: 0, r: 0 },
        { b: 0, g: 0, r: 0 },
        { b: 0, g: 0, r: 0 },
        { b: 0, g: 0, r: 0 },
        { b: 0, g: 0, r: 0 },
        { b: 0, g: 0, r: 0 },
        { b: 0, g: 2, r: 0 },
        { b: 0, g: 0, r: 0 },
        { b: 0, g: 0, r: 0 },
        { b: 0, g: 0, r: 0 },
        { b: 0, g: 0, r: 0 },
        { b: 0, g: 0, r: 0 },
        { b: 0, g: 0, r: 0 },
        { b: 52, g: 32, r: 34 },
        { b: 0, g: 60, r: 40 },
        { b: 69, g: 0, r: 49 },
        { b: 57, g: 102, r: 0 },
        { b: 59, g: 86, r: 143 },
        { b: 0, g: 38, r: 113 },
        { b: 223, g: 0, r: 102 },
        { b: 160, g: 217, r: 0 },
        { b: 154, g: 195, r: 238 },
        { b: 0, g: 54, r: 242 },
        { b: 251, g: 0, r: 80 },
        { b: 229, g: 153, r: 0 },
        { b: 48, g: 190, r: 106 },
        { b: 0, g: 110, r: 148 },
        { b: 55, g: 0, r: 47 },
        { b: 105, g: 75, r: 0 }
      ];
      fs.readFile(path, function(err, data) {
        if (err) throw err;
        var bmp = create.createFileHeader(data);
        bmp = create.createInfoHeader(bmp, data);
        expect(create.createPixelData(bmp, data)).to.eql(expectObject);
      });
    });
  });
});
